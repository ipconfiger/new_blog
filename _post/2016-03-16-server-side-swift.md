--- 
layout: post
title: ç”¨swiftå¼€å‘æœåŠ¡ç«¯åº”ç”¨
---
å»å¹´Swiftå¼€æºçš„æ—¶å€™å°±æ‰“ç®—è¯•è¯•ç”¨Swiftæ¥å¼€å‘æœåŠ¡ç«¯äº†, ä¸è¿‡äº‹æƒ…å¤ªå¤š, å¾ˆå¤šè½®å­ä¹Ÿä¸å…·å¤‡, å¤§æŠµä¸Šéœ€è¦è‡ªå·±é‡å†™å¾ˆå¤šä¸œè¥¿, ä½†æ˜¯äººæ°‘çš„åŠ›é‡æ˜¯å¼ºå¤§çš„, å‡ ä¸ªæœˆè¿‡å»å, å¤§æ‰¹çš„è½®å­å·²ç»åœ¨è·¯ä¸Šäº†, ç”±äºIBMçš„é‡‘å¤§è…¿åŠ å…¥, Swiftè¿›å…¥åç«¯å¼€å‘çš„è¿›åº¦æ˜æ˜¾çš„åŠ å¿«äº†.IBMçš„äº‘è®¡ç®—æœåŠ¡å·²ç»æ”¯æŒSwiftä½œä¸ºåç«¯æœåŠ¡çš„å¼€å‘è¯­è¨€, å¹¶ä¸”æ¨å‡ºäº†Swiftçš„Webæ¡†æ¶:[Kitura ](https://github.com/IBM-Swift/Kitura) . ä¸è¿‡ç»è¿‡ä¸¤å¤©è¯•ç”¨åå‘ç°æ­¤è´§ç¼–è¯‘å°¤å…¶éº»çƒ¦, releaseç¼–è¯‘è‡³ä»Šæ²¡æœ‰é€šè¿‡è¿‡ä¸€æ¬¡, ä¸”debugæ¨¡å¼ä¸‹æ€§èƒ½é—®é¢˜ä¹Ÿå¾ˆçªå‡º, é‚æ”¾å¼ƒä¹‹, åæ¥åœ¨å…¨çƒè‘—åçš„åŒæ€§äº¤å‹ç½‘ç«™ä¸Šæ‰¾åˆ°å¦å¤–ä¸€ä¸ªstarè¶…é«˜çš„æ¡†æ¶:[Swifton](https://github.com/necolt/Swifton)

è¿™ä¸ªæ¡†æ¶çš„åå­—å¾ˆæœ‰æ„æ€

![](http://ww1.sinaimg.cn/large/578b198bgw1f20xcpria0j20zi0l2afy.jpg)
ç”±äºè·¯ç”±è¿™äº›éƒ½æ˜¯ç…§æ¬Rails, è€Œä¸”åˆæ²¡æœ‰ORM, è„šæ‰‹æ¶å‘½ä»¤æ›´æ˜¯ç©ºè¯, æ–‡æ¡£å°±æ›´æ˜¯å› é™‹å°±ç®€äº†, æ‰€ä»¥å¦‚æœswiftæ¯”è¾ƒç†Ÿç»ƒçš„è¯è‡ªå·±RTFCæ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©.
## ç¯å¢ƒé¢„å¤‡
Swiftçš„æœåŠ¡ç«¯ç¯å¢ƒç°åœ¨è€Œä»Šçœ¼ç›®ä¸‹çš„çŠ¶å†µæ˜¯æ¯”è¾ƒå±€ä¿ƒçš„, å¦‚æœä¸å·®é’±ä¹°ä¸ªåƒåœ¾æ¡¶æ‹¿å»æ‰˜ç®¡, ä¹Ÿok, è¦æ˜¯è‡ªå·±å‡†å¤‡Linuxç¯å¢ƒçš„è¯ä¹Ÿå°±åªèƒ½Ubuntuäº†,å¹¸äºè¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒä¸»æµçš„,ä¸è¿‡å¥½äº›é¡¹ç›®éƒ½åœ¨Centosä¸Š, ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚
æœ¬åœ°å¼€å‘ç¯å¢ƒæ¯”è¾ƒå¥½è§£å†³, å¤šäºäº†IBMçš„é‡‘å¤§è…¿, [Kitura ](https://github.com/IBM-Swift/Kitura)  çš„Reponsitoryé‡Œæœ‰Dockerçš„è„šæœ¬å’ŒVagrantçš„vagrantfile. ç”±äºæˆ‘åœ¨æœ¬åœ°å¼€å‘ç”¨çš„æ˜¯Vagrant, æ‰€ä»¥åªéœ€è¦copyè¿™ä¸ªfileåˆ°é¡¹ç›®ç›®å½•ä¸‹, ç„¶åvagrant up, ç»è¿‡æ¼«é•¿çš„ç­‰å¾…(å¤§æ¦‚20åˆ†é’Ÿ), Swiftçš„æœ¬åœ°è°ƒè¯•ç¯å¢ƒå°±æ­å»ºå¥½äº†. 

## å¼€å§‹å¿«ä¹çš„coding
é¦–å…ˆå»ºç«‹ä¸€ä¸ªé¡¹ç›®

    $~/project_path>swift build --init 
    Creating Package.swift
    Creating .gitignore
    Creating Sources/
    Creating Sources/main.swift
    Creating Tests/
    
ç„¶ååŠ å…¥Swiftonçš„ä¾èµ–, vim Package.swift, åŠ å…¥ä¾èµ–åå°±æ˜¯ä¸‹é¢è¿™æ ·å­:

    dependencies: [
                  .Package(url: "https://github.com/necolt/Swifton.git",     versions: Version(0,0,5)..<Version(1,0,0)),
                  .Package(url: "https://github.com/necolt/Curassow.git", versions: Version(0,4,0)..<Version(1,0,0)),
             ]
         
å»ä¸­Curassowæ˜¯ä¸€ä¸ªåµŒå…¥å¼çš„Http Server, éƒ¨ç½²çš„æ—¶å€™ç”¨å®ƒæ¥éƒ¨ç½², å¥½å¤„æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒå¯ä»¥ç›´æ¥å¯åŠ¨å¤šä¸ªè¿›ç¨‹æ¥æé«˜æ€§èƒ½.
ä¹‹åç”¨

    $~/project_path>swift build

å°±å¼€å§‹ä¸‹è½½ä¾èµ–å¼€å§‹ç¼–è¯‘äº†. ä¸è¿‡ä¸–äº‹æ— å¸¸, è¿™é‡Œç¼–è¯‘å¿…å®šæ˜¯ä¼šå‡ºé”™çš„. å› ä¸ºSwift  buildåœ¨Devç‰ˆåŠ å…¥äº†TeståŠŸèƒ½, ç„¶åæœ‰ä¸ªbug, ä¼šå’Œå¾ˆå¤šè‡ªå¸¦äº†Testé¡¹ç›®çš„Testsç›®å½•å†²çª, ç¼–è¯‘çš„æ—¶å€™æŠ¥æ‰¾ä¸åˆ°Testsç›®å½•ä¸‹çš„èµ„æº. æ‰€ä»¥è¿™é‡Œéœ€è¦æ‰‹åŠ¨åˆ é™¤ä¸¤ä¸ªé¡¹ç›®ä¸‹çš„Testsç›®å½•

    $~/project_path>rm -rf ./Packages/PathKit-0.6.1/Tests
    $~/project_path>rm -rf ./Packages/Stencil-0.5.3/Tests

ä¹‹åå†è¿è¡Œç¼–è¯‘å°±ä¼šç›´æ¥é€šè¿‡äº†.
å½“ç„¶ç°åœ¨å•¥ä¹Ÿå¹²ä¸äº†, åªèƒ½è¯æ˜ç¯å¢ƒé€šé¡ºäº†, ä¸‹é¢å¼€å§‹æ­£å¼coding.

å…ˆåˆ›å»ºä¸€ä¸ªController.

    $~/project_path>touch ./Sources/HelloController.swift

å†™å…¥å¦‚ä¸‹å†…å®¹:

    import Swifton

    class HelloController:Controller{
        override init() {
            super.init()
            action("index") {request in
                return renderJSON(["hello": "world"])
            }
        }
    }

ç„¶ååœ¨main.swifté‡Œè¿™ä¹ˆå†™:

    import Swifton
    import Curassow
    let router = Router()
    router.get("/", HelloController()["index"])
    serve { router.respond($0) }

ç„¶åç¼–è¯‘

    $~/project_path>swift build
    Compiling Swift Module 'test00' (2 sources)
    Linking project_name

è¿è¡Œ:

    $~/project_path>.build/debug/project_name
    [2016-03-18 12:34:23 +0800] [80691] [INFO] Listening at http://0.0.0.0:8000    (80691)
    [2016-03-18 12:34:23 +0800] [80692] [INFO] Booting worker process with pid: 80692

è¿™ä¸ªæ—¶å€™åœ¨æµè§ˆå™¨é‡Œæ‰“å¼€ http://127.0.0.1:8000 


æ‰“ä¸å¼€

å¯¹çš„, ä¸çœ‹åˆ°è¿™é‡Œçš„äººæ˜¯ä¼šæ‰å‘é‡Œçš„, æˆ‘æ•…æ„çš„.
å› ä¸ºåœ¨Kituraçš„vagrantfileé‡Œæ˜ å°„çš„ç«¯å£æ˜¯8090åˆ°8090, æ‰€ä»¥8000åœ¨å¤–è¾¹æ˜¯è®¿é—®ä¸åˆ°çš„, æœ‰ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è§£å†³, ä¸€ä¸ªæ˜¯ä¿®æ”¹å¯åŠ¨çš„æ–¹å¼, ç”¨å‚æ•° --bind 0.0.0.0:8090. æˆ–è€…ç›´æ¥ä¿®æ”¹vagrantfileé‡Œçš„ç«¯å£æ˜ å°„éƒ¨åˆ†, å¤šåŠ ä¸ª8000åˆ°8000çš„æ˜ å°„å³å¯
ç„¶åç”¨æµè§ˆå™¨æ‰“å¼€, å°±ä¼šå‡ºç°ä¹…è¿çš„ 

    {"hello": "world"}

##æ€»ç»“ä¸€ä¸‹
å¤§ä½“ä¸Šæ¥è¯´ç”¨Swiftæ¥å¼€å‘æœåŠ¡ç«¯åº”ç”¨åº”è¯¥å…·å¤‡å¯ä»¥ç©è€çš„èƒ½åŠ›äº†, ä½†æ˜¯ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ç°åœ¨è¿˜ç¼ºä¹å¤§é‡çš„è½®å­ä»¥åŠæ–‡æ¡£å’Œå®æ“ç»éªŒ.
é€šè¿‡å¯¹Swiftonçš„ä»£ç ç ”ç©¶å‘ç°, Swiftçš„è¡¨è¾¾èƒ½åŠ›è¿˜æ˜¯å¾ˆå¼ºçš„, Swiftonçš„ä»£ç ç›¸å½“çš„çŸ­å°ç²¾æ‚. Curassowä¹Ÿæ˜¯ä¸€ä¸ªä»¿Gunicornçš„Server, çº¯Swiftå®ç°, ä¹Ÿéå¸¸çš„å€¼å¾—ç ”ç©¶ä»£ç , æ€§èƒ½å®æµ‹ç”±äºMacæœ¬åœ°å¹¶å‘æ•°çš„é™åˆ¶æ²¡æœ‰æ¢åˆ°å¤´, æœ‰ç©ºæ‰¾ä¸¤å°Ubuntuçš„æœºå™¨æ¥å®æµ‹ä¸€ä¸‹Curassow